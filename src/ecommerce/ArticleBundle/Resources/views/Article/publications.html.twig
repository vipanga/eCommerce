{# src/ecommerce/AccueilBundle/Resources/views/Accueil/publications.html.twig #}

{% extends "ecommerceAccueilBundle::layout.html.twig" %}

{% block titre %}
    Mes articles - {{ parent() }}
{% endblock %}

{% block contenu_accueil %}

    <div class="container">

        <div class="col-md-12">
            <ul class="breadcrumb">
                <li><a href="{{ path('ecommerce_accueil_accueil') }}">Accueil</a>
                </li>
                <li>Mes articles</li>
            </ul>
        </div>

        <div class="col-md-8 col-md-offset-2" id="basket">

            <div class="box">

                <h1 class="text-center">Articles postés</h1>

                <hr>

                <div class="col-sm-12 products-showing text-center">
                    Affichage de
                    <strong>
                        {% if page == nombrePage %}
                            {{ articles.count }}
                        {% else %}
                            {{ page * numberItemsPerPage }}
                        {% endif %}
                    </strong>
                    sur
                    <strong>
                        {{ articles.count }}
                    </strong>
                    articles
                </div>


                <hr>

                <div class="table-responsive">
                    <table class="table">
                        <thead>
                        <tr>
                            <th colspan="2">Article</th>
                            <th>Quantité</th>
                            <th>Prix unitaire</th>
                            <th colspan="3">Etat</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for article in articles %}
                            <tr>
                                <td>
                                    <a href="{{ path('ecommerce_article_detail', {'id': article.id, 'slug':article.slug}) }}">
                                        {# On vérifie qu'une image est bien associée à l'article #}
                                        {% if article.image is not null %}
                                            <img src="{{ asset(article.image.webPath) }}"
                                                 alt="{{ article.image.alt }}">
                                        {% else %}
                                            <img src="{{ asset('images/detailbig2.jpg') }}"
                                                 alt="{{ article.getNameItem() }}">
                                        {% endif %}
                                    </a>
                                </td>
                                <td>
                                    <a href="{{ path('ecommerce_article_detail', {'id': article.id, 'slug':article.slug}) }}">{{ article.getNameItem() }}</a>
                                </td>
                                <td>{{ article.getQuantity() }}</td>
                                <td>{{ article.getPrice() }} Fc</td>
                                <td>{{ article.getQuality() }}</td>
                                <td><a href="{{ path('ecommerce_article_edit', {'id': article.id}) }}"><i
                                                class="fa fa-pencil-square-o fa-lg" data-toggle="tooltip"
                                                data-placement="top" title="Modifier l'article"></i></a></td>
                                <td><a href="{{ path('ecommerce_article_delete', {'id': article.id}) }}"><i
                                                class="fa fa-trash-o fa-lg" data-toggle="tooltip" data-placement="top"
                                                title="Supprimer l'article"></i></a>
                                </td>
                            </tr>
                        {% else %}
                            <div class="col-sm-12">
                                <h3 class="text-center">Pas (encore !) d'articles</h3>
                            </div>
                        {% endfor %}
                        </tbody>
                        {#<tfoot>
                            <tr>
                                <th colspan="5">Total</th>
                                <th colspan="2">$55.00</th>
                            </tr>
                        </tfoot>#}
                    </table>

                </div>
                <!-- /.table-responsive -->

                <div class="box-footer">
                    <div class="pages">
                        <ul class="pagination">
                            {# On utilise la fonction range(a, b) qui crée un tableau de valeurs entre a et b #}
                            {% for p in range(1, nombrePage) %}
                                <li{% if p == page %} class="active"{% endif %}>
                                    <a href="{{ path('ecommerce_article_publications', {'page': p}) }}">{{ p }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>

            </div>
            <!-- /.box -->


        </div>
        <!-- /.col-md-12 -->

    </div>
    <!-- /.container -->

{% endblock %}